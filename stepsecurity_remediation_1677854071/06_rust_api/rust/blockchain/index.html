<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Blockchain management module"><meta name="keywords" content="rust, rustlang, rust-lang, blockchain"><title>blockchain - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../blockchain/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../blockchain/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate blockchain</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../blockchain/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">blockchain</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/blockchain/lib.rs.html#1-68">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="blockchain-management-module"><a href="#blockchain-management-module">Blockchain management module</a></h2>
<p>this module provides a high level API to manage the blockchain and the different
state it may be. Allowing tracking different branches and to be able to make simple
informed decisions as to what is the tip of the blockchain or what is a valid block.</p>
<h3 id="reference"><a href="#reference">Reference</a></h3>
<p>the <code>Reference</code> holds the state information at the given block. It can be used to
know the blockdate, the chainlength etc… but it also links to the epoch information
such as the current leadership schedule: this is core to validate a block.</p>
<p>From a <code>Reference</code> it is possible to <code>chain</code> a <code>Block</code>. This means creating a new
reference with a derive state from the previous <code>Reference</code>. This operation will
do all the necessary verifications.</p>
<h3 id="epochinfo"><a href="#epochinfo">EpochInfo</a></h3>
<p>The <code>EpochInfo</code> is the data tied to a given Epoch: the TimeFrame, the stake
distribution, the leadership schedule, the ledger parameters (fees, etc…).
When chaining a <code>Block</code> with a <code>Reference</code>, if an epoch transition occurs,
a new <code>EpochInfo</code> will be constructed for the new epoch.</p>
<h3 id="selection-between-2-branches"><a href="#selection-between-2-branches">Selection between 2 branches</a></h3>
<p>In some consensus, it may be that there are multiple competing blocks for the
same slot in the blockchain. It is possible to use <code>select</code> to compare the
2 different <code>Reference</code>.</p>
<h3 id="checkpoints"><a href="#checkpoints">Checkpoints</a></h3>
<p>From any reference, it is possible to build <code>Checkpoints</code>. These is a list
of header ID (block’s header hash) that are selected arbitrarily from the
given <code>Reference</code>. They can be used to send to the network or storage as
hints of where to start from when requiring a stream of blocks from one of
the header ID in the Checkpoints.</p>
<h2 id="the-blockchain-manager"><a href="#the-blockchain-manager">The Blockchain manager</a></h2>
<p>the <code>Blockchain</code> is a simple collection object that will keep track of the
different branches and blocks as well as the Tip of the blockchain. It will
garbage collect the <code>Reference</code> that are not used to prevent keeping too
much non needed data in memory.</p>
<p>When adding a new block, the blockchain will lookup for the best option
regarding branch management. It will first look for an existing branch
to continue it or will create a new branch if required.</p>
<p>If the block is added successfully, the <code>Event::Added</code> will be returned.
It contains the details as to what and how it was added. A new branch
may have been created, it may even be the new tip. It will also tell if an
epoch transition occurs: that way the application may notify the different
module with the appropriate data.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Blockchain.html" title="blockchain::Blockchain struct">Blockchain</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Checkpoints.html" title="blockchain::Checkpoints struct">Checkpoints</a></div><div class="item-right docblock-short">different checkpoints in time of the blockchain</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Configuration.html" title="blockchain::Configuration struct">Configuration</a></div><div class="item-right docblock-short">configuration entries for the blockchain parameters</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.EpochInfo.html" title="blockchain::EpochInfo struct">EpochInfo</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Reference.html" title="blockchain::Reference struct">Reference</a></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.EpochInfoError.html" title="blockchain::EpochInfoError enum">EpochInfoError</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="blockchain::Error enum">Error</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Event.html" title="blockchain::Event enum">Event</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Selection.html" title="blockchain::Selection enum">Selection</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="blockchain" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>